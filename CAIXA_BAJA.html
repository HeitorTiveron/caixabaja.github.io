<!DOCTYPE html>

<html lang="pt-BR">

<head>

ย ย <meta charset="UTF-8">

ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">

ย ย <title>Caixa da Equipe - BAJA QUERO-QUERO</title>

ย ย <style>

ย ย ย ย * {

ย ย ย ย ย ย margin: 0;

ย ย ย ย ย ย padding: 0;

ย ย ย ย ย ย box-sizing: border-box;

ย ย ย ย }



ย ย ย ย body {

ย ย ย ย ย ย font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

ย ย ย ย ย ย background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

ย ย ย ย ย ย min-height: 100vh;

ย ย ย ย ย ย padding: 20px;

ย ย ย ย }



ย ย ย ย .container {

ย ย ย ย ย ย max-width: 1200px;

ย ย ย ย ย ย margin: 0 auto;

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย border-radius: 15px;

ย ย ย ย ย ย box-shadow: 0 20px 40px rgba(0,0,0,0.1);

ย ย ย ย ย ย overflow: hidden;

ย ย ย ย }



ย ย ย ย .header {

ย ย ย ย ย ย background: linear-gradient(135deg, #4CAF50, #45a049);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย padding: 30px;

ย ย ย ย ย ย text-align: center;

ย ย ย ย }



ย ย ย ย .header h1 {

ย ย ย ย ย ย font-size: 2.5em;

ย ย ย ย ย ย margin-bottom: 10px;

ย ย ย ย ย ย text-shadow: 2px 2px 4px rgba(0,0,0,0.3);

ย ย ย ย }



ย ย ย ย .header p {

ย ย ย ย ย ย font-size: 1.2em;

ย ย ย ย ย ย opacity: 0.9;

ย ย ย ย }



ย ย ย ย .main-content {

ย ย ย ย ย ย display: grid;

ย ย ย ย ย ย grid-template-columns: 1fr 350px;

ย ย ย ย ย ย gap: 30px;

ย ย ย ย ย ย padding: 30px;

ย ย ย ย }



ย ย ย ย .calendar-section {

ย ย ย ย ย ย background: #f8f9fa;

ย ย ย ย ย ย border-radius: 10px;

ย ย ย ย ย ย padding: 25px;

ย ย ย ย }



ย ย ย ย .calendar-header {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย justify-content: space-between;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย margin-bottom: 25px;

ย ย ย ย }



ย ย ย ย .month-nav {

ย ย ย ย ย ย background: #007bff;

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย border: none;

ย ย ย ย ย ย padding: 10px 15px;

ย ย ย ย ย ย border-radius: 8px;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย font-size: 16px;

ย ย ย ย ย ย transition: all 0.3s ease;

ย ย ย ย }



ย ย ย ย .month-nav:hover {

ย ย ย ย ย ย background: #0056b3;

ย ย ย ย ย ย transform: translateY(-2px);

ย ย ย ย }



ย ย ย ย .current-month {

ย ย ย ย ย ย font-size: 1.5em;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย padding: 10px 20px;

ย ย ย ย ย ย border-radius: 8px;

ย ย ย ย ย ย transition: all 0.3s ease;

ย ย ย ย }



ย ย ย ย .current-month.deficit {

ย ย ย ย ย ย background: #dc3545;

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .current-month.surplus {

ย ย ย ย ย ย background: #28a745;

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .current-month.neutral {

ย ย ย ย ย ย background: #6c757d;

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .balance-display {

ย ย ย ย ย ย text-align: center;

ย ย ย ย ย ย margin: 20px 0;

ย ย ย ย ย ย padding: 20px;

ย ย ย ย ย ย border-radius: 10px;

ย ย ย ย ย ย font-size: 1.3em;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย transition: all 0.3s ease;

ย ย ย ย }



ย ย ย ย .balance-display.positive {

ย ย ย ย ย ย background: #d4edda;

ย ย ย ย ย ย color: #155724;

ย ย ย ย ย ย border: 2px solid #28a745;

ย ย ย ย }



ย ย ย ย .balance-display.negative {

ย ย ย ย ย ย background: #f8d7da;

ย ย ย ย ย ย color: #721c24;

ย ย ย ย ย ย border: 2px solid #dc3545;

ย ย ย ย }



ย ย ย ย .balance-display.zero {

ย ย ย ย ย ย background: #e2e3e5;

ย ย ย ย ย ย color: #383d41;

ย ย ย ย ย ย border: 2px solid #6c757d;

ย ย ย ย }



ย ย ย ย .mini-summary {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย justify-content: space-around;

ย ย ย ย ย ย margin: 20px 0;

ย ย ย ย ย ย padding: 15px;

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย border-radius: 10px;

ย ย ย ย ย ย box-shadow: 0 2px 10px rgba(0,0,0,0.1);

ย ย ย ย }



ย ย ย ย .mini-item {

ย ย ย ย ย ย text-align: center;

ย ย ย ย ย ย padding: 10px;

ย ย ย ย }



ย ย ย ย .mini-item .symbol {

ย ย ย ย ย ย font-size: 2em;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย margin-bottom: 5px;

ย ย ย ย }



ย ย ย ย .mini-item .amount {

ย ย ย ย ย ย font-size: 1.1em;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย }



ย ย ย ย .mini-item.income .symbol {

ย ย ย ย ย ย color: #28a745;

ย ย ย ย }



ย ย ย ย .mini-item.expense .symbol {

ย ย ย ย ย ย color: #dc3545;

ย ย ย ย }



ย ย ย ย .forms-section {

ย ย ย ย ย ย background: #f8f9fa;

ย ย ย ย ย ย border-radius: 10px;

ย ย ย ย ย ย padding: 25px;

ย ย ย ย }



ย ย ย ย .form-group {

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย }



ย ย ย ย .form-group label {

ย ย ย ย ย ย display: block;

ย ย ย ย ย ย margin-bottom: 8px;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย color: #333;

ย ย ย ย }



ย ย ย ย .form-group input, .form-group select, .form-group textarea {

ย ย ย ย ย ย width: 100%;

ย ย ย ย ย ย padding: 12px;

ย ย ย ย ย ย border: 2px solid #ddd;

ย ย ย ย ย ย border-radius: 8px;

ย ย ย ย ย ย font-size: 16px;

ย ย ย ย ย ย transition: border-color 0.3s ease;

ย ย ย ย }



ย ย ย ย .form-group input:focus, .form-group select:focus, .form-group textarea:focus {

ย ย ย ย ย ย outline: none;

ย ย ย ย ย ย border-color: #007bff;

ย ย ย ย ย ย box-shadow: 0 0 0 3px rgba(0,123,255,0.25);

ย ย ย ย }



ย ย ย ย .btn {

ย ย ย ย ย ย background: #007bff;

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย border: none;

ย ย ย ย ย ย padding: 12px 25px;

ย ย ย ย ย ย border-radius: 8px;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย font-size: 16px;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย width: 100%;

ย ย ย ย ย ย margin-top: 10px;

ย ย ย ย ย ย transition: all 0.3s ease;

ย ย ย ย }



ย ย ย ย .btn:hover {

ย ย ย ย ย ย background: #0056b3;

ย ย ย ย ย ย transform: translateY(-2px);

ย ย ย ย ย ย box-shadow: 0 5px 15px rgba(0,123,255,0.4);

ย ย ย ย }



ย ย ย ย .btn.income {

ย ย ย ย ย ย background: #28a745;

ย ย ย ย }



ย ย ย ย .btn.income:hover {

ย ย ย ย ย ย background: #1e7e34;

ย ย ย ย }



ย ย ย ย .btn.expense {

ย ย ย ย ย ย background: #dc3545;

ย ย ย ย }



ย ย ย ย .btn.expense:hover {

ย ย ย ย ย ย background: #c82333;

ย ย ย ย }



ย ย ย ย .transactions-list {

ย ย ย ย ย ย margin-top: 25px;

ย ย ย ย ย ย max-height: 400px;

ย ย ย ย ย ย overflow-y: auto;

ย ย ย ย }



ย ย ย ย .transaction-item {

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย padding: 15px;

ย ย ย ย ย ย margin-bottom: 10px;

ย ย ย ย ย ย border-radius: 8px;

ย ย ย ย ย ย border-left: 4px solid;

ย ย ย ย ย ย box-shadow: 0 2px 5px rgba(0,0,0,0.1);

ย ย ย ย ย ย animation: slideIn 0.3s ease;

ย ย ย ย }



ย ย ย ย .transaction-item.income {

ย ย ย ย ย ย border-left-color: #28a745;

ย ย ย ย }



ย ย ย ย .transaction-item.expense {

ย ย ย ย ย ย border-left-color: #dc3545;

ย ย ย ย }



ย ย ย ย .transaction-header {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย justify-content: space-between;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย margin-bottom: 8px;

ย ย ย ย }



ย ย ย ย .transaction-name {

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย font-size: 1.1em;

ย ย ย ย }



ย ย ย ย .transaction-amount {

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย font-size: 1.2em;

ย ย ย ย }



ย ย ย ย .transaction-amount.positive {

ย ย ย ย ย ย color: #28a745;

ย ย ย ย }



ย ย ย ย .transaction-amount.negative {

ย ย ย ย ย ย color: #dc3545;

ย ย ย ย }



ย ย ย ย .transaction-description {

ย ย ย ย ย ย color: #666;

ย ย ย ย ย ย font-size: 0.9em;

ย ย ย ย ย ย margin-bottom: 5px;

ย ย ย ย }



ย ย ย ย .transaction-date {

ย ย ย ย ย ย color: #999;

ย ย ย ย ย ย font-size: 0.8em;

ย ย ย ย }



ย ย ย ย .delete-btn {

ย ย ย ย ย ย background: #dc3545;

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย border: none;

ย ย ย ย ย ย padding: 5px 10px;

ย ย ย ย ย ย border-radius: 5px;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย font-size: 12px;

ย ย ย ย ย ย margin-left: 10px;

ย ย ย ย }



ย ย ย ย .delete-btn:hover {

ย ย ย ย ย ย background: #c82333;

ย ย ย ย }



ย ย ย ย @keyframes slideIn {

ย ย ย ย ย ย from {

ย ย ย ย ย ย ย ย opacity: 0;

ย ย ย ย ย ย ย ย transform: translateY(-10px);

ย ย ย ย ย ย }

ย ย ย ย ย ย to {

ย ย ย ย ย ย ย ย opacity: 1;

ย ย ย ย ย ย ย ย transform: translateY(0);

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย .stats-summary {

ย ย ย ย ย ย display: grid;

ย ย ย ย ย ย grid-template-columns: 1fr 1fr;

ย ย ย ย ย ย gap: 15px;

ย ย ย ย ย ย margin-bottom: 25px;

ย ย ย ย }



ย ย ย ย .stat-card {

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย padding: 20px;

ย ย ย ย ย ย border-radius: 10px;

ย ย ย ย ย ย text-align: center;

ย ย ย ย ย ย box-shadow: 0 2px 10px rgba(0,0,0,0.1);

ย ย ย ย }



ย ย ย ย .stat-card h3 {

ย ย ย ย ย ย color: #666;

ย ย ย ย ย ย margin-bottom: 10px;

ย ย ย ย ย ย font-size: 1em;

ย ย ย ย }



ย ย ย ย .stat-card .value {

ย ย ย ย ย ย font-size: 1.5em;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย }



ย ย ย ย .stat-card.income .value {

ย ย ย ย ย ย color: #28a745;

ย ย ย ย }



ย ย ย ย .stat-card.expense .value {

ย ย ย ย ย ย color: #dc3545;

ย ย ย ย }



ย ย ย ย @media (max-width: 768px) {

ย ย ย ย ย ย .main-content {

ย ย ย ย ย ย ย ย grid-template-columns: 1fr;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย .calendar-header {

ย ย ย ย ย ย ย ย flex-direction: column;

ย ย ย ย ย ย ย ย gap: 15px;

ย ย ย ย ย ย }

ย ย ย ย }

ย ย </style>

</head>

<body>

ย ย <div class="container">

ย ย ย ย <div class="header">

ย ย ย ย ย ย <h1>๐๏ธ BAJA QUERO-QUERO</h1>

ย ย ย ย ย ย <p>Sistema de Controle Financeiro da Equipe</p>

ย ย ย ย </div>



ย ย ย ย <div class="main-content">

ย ย ย ย ย ย <div class="calendar-section">

ย ย ย ย ย ย ย ย <div class="calendar-header">

ย ย ย ย ย ย ย ย ย ย <button class="month-nav" onclick="changeMonth(-1)">โ Anterior</button>

ย ย ย ย ย ย ย ย ย ย <div class="current-month neutral" id="currentMonth">Janeiro 2025</div>

ย ย ย ย ย ย ย ย ย ย <button class="month-nav" onclick="changeMonth(1)">Prรณximo โถ</button>

ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย <div class="balance-display zero" id="balanceDisplay">

ย ย ย ย ย ย ย ย ย ย Saldo: R$ 0,00

ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย <div class="mini-summary">

ย ย ย ย ย ย ย ย ย ย <div class="mini-item income">

ย ย ย ย ย ย ย ย ย ย ย ย <div class="symbol">+</div>

ย ย ย ย ย ย ย ย ย ย ย ย <div class="amount" id="totalIncome">R$ 0,00</div>

ย ย ย ย ย ย ย ย ย ย ย ย <div>Entradas</div>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย <div class="mini-item expense">

ย ย ย ย ย ย ย ย ย ย ย ย <div class="symbol">-</div>

ย ย ย ย ย ย ย ย ย ย ย ย <div class="amount" id="totalExpense">R$ 0,00</div>

ย ย ย ย ย ย ย ย ย ย ย ย <div>Saรญdas</div>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย <div class="stats-summary">

ย ย ย ย ย ย ย ย ย ย <div class="stat-card income">

ย ย ย ย ย ย ย ย ย ย ย ย <h3>Total de Entradas</h3>

ย ย ย ย ย ย ย ย ย ย ย ย <div class="value" id="monthlyIncome">R$ 0,00</div>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย <div class="stat-card expense">

ย ย ย ย ย ย ย ย ย ย ย ย <h3>Total de Saรญdas</h3>

ย ย ย ย ย ย ย ย ย ย ย ย <div class="value" id="monthlyExpense">R$ 0,00</div>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย </div>



ย ย ย ย ย ย <div class="forms-section">

ย ย ย ย ย ย ย ย <h2 style="margin-bottom: 25px; color: #333;">๐ Adicionar Transaรงรฃo</h2>

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย <form id="transactionForm">

ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย <label for="transactionType">Tipo de Transaรงรฃo:</label>

ย ย ย ย ย ย ย ย ย ย ย ย <select id="transactionType" required>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="">Selecione o tipo</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="income">๐ฐ Entrada (+)</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="expense">๐ธ Saรญda (-)</option>

ย ย ย ย ย ย ย ย ย ย ย ย </select>

ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย <label for="transactionName">Nome da Transaรงรฃo:</label>

ย ย ย ย ย ย ย ย ย ย ย ย <input type="text" id="transactionName" placeholder="Ex: Patrocรญnio, Peรงas, Combustรญvel..." required>

ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย <label for="transactionAmount">Valor (R$):</label>

ย ย ย ย ย ย ย ย ย ย ย ย <input type="number" id="transactionAmount" step="0.01" min="0" placeholder="0,00" required>

ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย <label for="transactionDescription">Descriรงรฃo:</label>

ย ย ย ย ย ย ย ย ย ย ย ย <textarea id="transactionDescription" rows="3" placeholder="Detalhes sobre a transaรงรฃo..."></textarea>

ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย <button type="submit" class="btn" id="submitBtn">Adicionar Transaรงรฃo</button>

ย ย ย ย ย ย ย ย </form>



ย ย ย ย ย ย ย ย <div class="transactions-list">

ย ย ย ย ย ย ย ย ย ย <h3 style="margin-bottom: 15px; color: #333;">๐ Transaรงรตes do Mรชs</h3>

ย ย ย ย ย ย ย ย ย ย <div id="transactionsList"></div>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย </div>

ย ย ย ย </div>

ย ย </div>



ย ย <script>

ย ย ย ย // Sistema de dados persistente usando JSONBin.io

ย ย ย ย let transactions = {};

ย ย ย ย let currentMonth = new Date().getMonth();

ย ย ย ย let currentYear = new Date().getFullYear();

ย ย ย ย let isLoading = false;



ย ย ย ย // Configuraรงรฃo da API para persistรชncia com bin fixo

ย ย ย ย const API_CONFIG = {

ย ย ย ย ย ย binId: '68ada49fd0ea881f40661354',

ย ย ย ย ย ย apiKey: '$2a$10$5dbqX7g2fVH97jVvtjWVk.de3t2omZ9AP0SDnJb/2oK69Sh5WPvi.',

ย ย ย ย ย ย baseUrl: 'https://api.jsonbin.io/v3/b/'

ย ย ย ย };



ย ย ย ย const monthNames = [

ย ย ย ย ย ย 'Janeiro', 'Fevereiro', 'Marรงo', 'Abril', 'Maio', 'Junho',

ย ย ย ย ย ย 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'

ย ย ย ย ];



ย ย ย ย // Funรงรฃo para salvar dados na nuvem

ย ย ย ย async function saveToCloud() {

ย ย ย ย ย ย if (isLoading || !API_CONFIG.binId || !API_CONFIG.apiKey) return;

ย ย ย ย ย ยย

ย ย ย ย ย ย // Salvar no localStorage continua sendo um bom backup offline

ย ย ย ย ย ย localStorage.setItem('bajaQueroQuero_backup', JSON.stringify({ transactions }));

ย ย ย ย ย ยย

ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย const data = {

ย ย ย ย ย ย ย ย ย ย transactions: transactions,

ย ย ย ย ย ย ย ย ย ย lastUpdate: new Date().toISOString(),

ย ย ย ย ย ย ย ย ย ย teamName: 'BAJA QUERO-QUERO'

ย ย ย ย ย ย ย ย };



ย ย ย ย ย ย ย ย // Usamos PUT para ATUALIZAR o bin existente, em vez de criar um novo

ย ย ย ย ย ย ย ย const response = await fetch(`${API_CONFIG.baseUrl}${API_CONFIG.binId}`, {

ย ย ย ย ย ย ย ย ย ย method: 'PUT',

ย ย ย ย ย ย ย ย ย ย headers: {

ย ย ย ย ย ย ย ย ย ย ย ย 'Content-Type': 'application/json',

ย ย ย ย ย ย ย ย ย ย ย ย 'X-Master-Key': API_CONFIG.apiKey

ย ย ย ย ย ย ย ย ย ย },

ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(data)

ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย ย ย if (response.ok) {

ย ย ย ย ย ย ย ย ย ย console.log('โ Dados salvos na nuvem com sucesso!');

ย ย ย ย ย ย ย ย ย ย showNotification('โ Dados sincronizados na nuvem!', 'success');

ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย throw new Error('Falha ao salvar na nuvem. Status: ' + response.status);

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error('โ๏ธ Erro ao salvar na nuvem:', error.message);

ย ย ย ย ย ย ย ย showNotification('๐พ Dados salvos localmente (falha na nuvem)', 'warning');

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Funรงรฃo para carregar dados da nuvem

ย ย ย ย async function loadFromCloud() {

ย ย ย ย ย ย if (isLoading || !API_CONFIG.binId || !API_CONFIG.apiKey) {

ย ย ย ย ย ย ย ย console.warn("API_CONFIG nรฃo configurada. Usando dados locais.");

ย ย ย ย ย ย ย ย const localData = localStorage.getItem('bajaQueroQuero_backup');

ย ย ย ย ย ย ย ย if (localData) {

ย ย ย ย ย ย ย ย ย ย transactions = JSON.parse(localData).transactions || {};

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย updateDisplay();

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย isLoading = true;

ย ย ย ย ย ยย

ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย // Usamos GET para LER o bin existente

ย ย ย ย ย ย ย ย const response = await fetch(`${API_CONFIG.baseUrl}${API_CONFIG.binId}/latest`, {

ย ย ย ย ย ย ย ย ย ย method: 'GET',

ย ย ย ย ย ย ย ย ย ย headers: {

ย ย ย ย ย ย ย ย ย ย ย ย 'X-Master-Key': API_CONFIG.apiKey

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย ย ย if (response.ok) {

ย ย ย ย ย ย ย ย ย ย const cloudData = await response.json();

ย ย ย ย ย ย ย ย ย ย if (cloudData.transactions) {

ย ย ย ย ย ย ย ย ย ย ย ย transactions = cloudData.transactions;

ย ย ย ย ย ย ย ย ย ย ย ย localStorage.setItem('bajaQueroQuero_backup', JSON.stringify(cloudData)); // Atualiza o backup local

ย ย ย ย ย ย ย ย ย ย ย ย console.log('โ๏ธ Dados carregados da nuvem!');

ย ย ย ย ย ย ย ย ย ย ย ย showNotification('โ๏ธ Dados sincronizados!', 'success');

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย throw new Error('Bin nรฃo encontrado ou chave invรกlida. Status: ' + response.status);

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error('โ๏ธ Falha ao carregar da nuvem, usando backup local:', error.message);

ย ย ย ย ย ย ย ย const localData = localStorage.getItem('bajaQueroQuero_backup');

ย ย ย ย ย ย ย ย if (localData) {

ย ย ย ย ย ย ย ย ย ย transactions = JSON.parse(localData).transactions || {};

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย showNotification('๐ฑ Usando dados de backup local', 'info');

ย ย ย ย ย ย } finally {

ย ย ย ย ย ย ย ย isLoading = false;

ย ย ย ย ย ย ย ย updateDisplay();

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Funรงรฃo para mostrar notificaรงรตes

ย ย ย ย function showNotification(message, type = 'info') {

ย ย ย ย ย ย const notification = document.createElement('div');

ย ย ย ย ย ย notification.className = `notification ${type}`;

ย ย ย ย ย ย notification.textContent = message;

ย ย ย ย ย ย notification.style.cssText = `

ย ย ย ย ย ย ย ย position: fixed;

ย ย ย ย ย ย ย ย top: 20px;

ย ย ย ย ย ย ย ย right: 20px;

ย ย ย ย ย ย ย ย padding: 15px 20px;

ย ย ย ย ย ย ย ย border-radius: 8px;

ย ย ย ย ย ย ย ย color: white;

ย ย ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย ย ย z-index: 1000;

ย ย ย ย ย ย ย ย animation: slideInRight 0.3s ease;

ย ย ย ย ย ย ย ย max-width: 300px;

ย ย ย ย ย ย `;



ย ย ย ย ย ย switch (type) {

ย ย ย ย ย ย ย ย case 'success':

ย ย ย ย ย ย ย ย ย ย notification.style.background = '#28a745';

ย ย ย ย ย ย ย ย ย ย break;

ย ย ย ย ย ย ย ย case 'warning':

ย ย ย ย ย ย ย ย ย ย notification.style.background = '#ffc107';

ย ย ย ย ย ย ย ย ย ย notification.style.color = '#000';

ย ย ย ย ย ย ย ย ย ย break;

ย ย ย ย ย ย ย ย case 'error':

ย ย ย ย ย ย ย ย ย ย notification.style.background = '#dc3545';

ย ย ย ย ย ย ย ย ย ย break;

ย ย ย ย ย ย ย ย default:

ย ย ย ย ย ย ย ย ย ย notification.style.background = '#17a2b8';

ย ย ย ย ย ย }



ย ย ย ย ย ย document.body.appendChild(notification);



ย ย ย ย ย ย setTimeout(() => {

ย ย ย ย ย ย ย ย notification.style.animation = 'slideOutRight 0.3s ease';

ย ย ย ย ย ย ย ย setTimeout(() => {

ย ย ย ย ย ย ย ย ย ย if (notification.parentNode) {

ย ย ย ย ย ย ย ย ย ย ย ย notification.parentNode.removeChild(notification);

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย }, 300);

ย ย ย ย ย ย }, 3000);

ย ย ย ย }



ย ย ย ย // Adicionar CSS para animaรงรตes das notificaรงรตes

ย ย ย ย const style = document.createElement('style');

ย ย ย ย style.textContent = `

ย ย ย ย ย ย @keyframes slideInRight {

ย ย ย ย ย ย ย ย from { transform: translateX(100%); opacity: 0; }

ย ย ย ย ย ย ย ย to { transform: translateX(0); opacity: 1; }

ย ย ย ย ย ย }

ย ย ย ย ย ย @keyframes slideOutRight {

ย ย ย ย ย ย ย ย from { transform: translateX(0); opacity: 1; }

ย ย ย ย ย ย ย ย to { transform: translateX(100%); opacity: 0; }

ย ย ย ย ย ย }

ย ย ย ย `;

ย ย ย ย document.head.appendChild(style);



ย ย ย ย // Inicializar o sistema

ย ย ย ย async function init() {

ย ย ย ย ย ย console.log('๐ Inicializando sistema...');

ย ย ย ย ย ยย

ย ย ย ย ย ย // Carregar dados salvos

ย ย ย ย ย ย await loadFromCloud();

ย ย ย ย ย ยย

ย ย ย ย ย ย setupFormHandlers();

ย ย ย ย ย ยย

ย ย ย ย ย ย console.log('โ Sistema inicializado com sucesso!');

ย ย ย ย }



ย ย ย ย // Configurar handlers do formulรกrio

ย ย ย ย function setupFormHandlers() {

ย ย ย ย ย ย const form = document.getElementById('transactionForm');

ย ย ย ย ย ย const typeSelect = document.getElementById('transactionType');

ย ย ย ย ย ย const submitBtn = document.getElementById('submitBtn');



ย ย ย ย ย ย typeSelect.addEventListener('change', function() {

ย ย ย ย ย ย ย ย console.log('Tipo selecionado:', this.value);

ย ย ย ย ย ย ย ย if (this.value === 'income') {

ย ย ย ย ย ย ย ย ย ย submitBtn.className = 'btn income';

ย ย ย ย ย ย ย ย ย ย submitBtn.textContent = '๐ฐ Adicionar Entrada';

ย ย ย ย ย ย ย ย } else if (this.value === 'expense') {

ย ย ย ย ย ย ย ย ย ย submitBtn.className = 'btn expense';

ย ย ย ย ย ย ย ย ย ย submitBtn.textContent = '๐ธ Adicionar Saรญda';

ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย submitBtn.className = 'btn';

ย ย ย ย ย ย ย ย ย ย submitBtn.textContent = 'Adicionar Transaรงรฃo';

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย });



ย ย ย ย ย ย form.addEventListener('submit', function(e) {

ย ย ย ย ย ย ย ย e.preventDefault();

ย ย ย ย ย ย ย ย console.log('Formulรกrio submetido');

ย ย ย ย ย ย ย ย addTransaction();

ย ย ย ย ย ย });



ย ย ย ย ย ย // Adicionar listener para o botรฃo tambรฉm (caso o evento submit nรฃo funcione)

ย ย ย ย ย ย submitBtn.addEventListener('click', function(e) {

ย ย ย ย ย ย ย ย e.preventDefault();

ย ย ย ย ย ย ย ย console.log('Botรฃo clicado diretamente');

ย ย ย ย ย ย ย ย addTransaction();

ย ย ย ย ย ย });



ย ย ย ย ย ย // Debug: mostrar dados atuais

ย ย ย ย ย ย console.log('Handlers configurados. Dados atuais:', transactions);

ย ย ย ย }



ย ย ย ย // Adicionar transaรงรฃo

ย ย ย ย async function addTransaction() {

ย ย ย ย ย ย const type = document.getElementById('transactionType').value;

ย ย ย ย ย ย const name = document.getElementById('transactionName').value.trim();

ย ย ย ย ย ย const amountInput = document.getElementById('transactionAmount').value;

ย ย ย ย ย ย const description = document.getElementById('transactionDescription').value.trim();



ย ย ย ย ย ย console.log('Dados do formulรกrio:', { type, name, amountInput, description });



ย ย ย ย ย ย // Validaรงรตes mais especรญficas

ย ย ย ย ย ย if (!type) {

ย ย ย ย ย ย ย ย alert('Por favor, selecione o tipo de transaรงรฃo!');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย if (!name) {

ย ย ย ย ย ย ย ย alert('Por favor, informe o nome da transaรงรฃo!');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย if (!amountInput || amountInput === '' || parseFloat(amountInput) <= 0) {

ย ย ย ย ย ย ย ย alert('Por favor, informe um valor vรกlido maior que zero!');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย const amount = parseFloat(amountInput);



ย ย ย ย ย ย if (isNaN(amount)) {

ย ย ย ย ย ย ย ย alert('Valor invรกlido! Use apenas nรบmeros.');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย const monthKey = `${currentYear}-${currentMonth}`;

ย ย ย ย ย ยย

ย ย ย ย ย ย if (!transactions[monthKey]) {

ย ย ย ย ย ย ย ย transactions[monthKey] = [];

ย ย ย ย ย ย }



ย ย ย ย ย ย const transaction = {

ย ย ย ย ย ย ย ย id: Date.now(),

ย ย ย ย ย ย ย ย type: type,

ย ย ย ย ย ย ย ย name: name,

ย ย ย ย ย ย ย ย amount: amount,

ย ย ย ย ย ย ย ย description: description || '',

ย ย ย ย ย ย ย ย date: new Date().toLocaleDateString('pt-BR'),

ย ย ย ย ย ย ย ย timestamp: new Date().toISOString()

ย ย ย ย ย ย };



ย ย ย ย ย ย transactions[monthKey].push(transaction);



ย ย ย ย ย ย console.log('Transaรงรฃo adicionada:', transaction);

ย ย ย ย ย ย console.log('Total de transaรงรตes no mรชs:', transactions[monthKey].length);



ย ย ย ย ย ย // Feedback visual

ย ย ย ย ย ย const submitBtn = document.getElementById('submitBtn');

ย ย ย ย ย ย const originalText = submitBtn.textContent;

ย ย ย ย ย ย submitBtn.textContent = '๐พ Salvando...';

ย ย ย ย ย ย submitBtn.disabled = true;

ย ย ย ย ย ย submitBtn.style.background = '#ffc107';



ย ย ย ย ย ย // Salvar na nuvem

ย ย ย ย ย ย await saveToCloud();



ย ย ย ย ย ย setTimeout(() => {

ย ย ย ย ย ย ย ย submitBtn.textContent = 'โ Salvo!';

ย ย ย ย ย ย ย ย submitBtn.style.background = '#28a745';

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย setTimeout(() => {

ย ย ย ย ย ย ย ย ย ย submitBtn.textContent = originalText;

ย ย ย ย ย ย ย ย ย ย submitBtn.style.background = '';

ย ย ย ย ย ย ย ย ย ย submitBtn.disabled = false;

ย ย ย ย ย ย ย ย }, 1000);

ย ย ย ย ย ย }, 500);



ย ย ย ย ย ย // Limpar formulรกrio

ย ย ย ย ย ย document.getElementById('transactionForm').reset();

ย ย ย ย ย ย document.getElementById('submitBtn').className = 'btn';

ย ย ย ย ย ย document.getElementById('submitBtn').textContent = 'Adicionar Transaรงรฃo';



ย ย ย ย ย ย // Atualizar display

ย ย ย ย ย ย updateDisplay();

ย ย ย ย }



ย ย ย ย // Remover transaรงรฃo

ย ย ย ย async function removeTransaction(id) {

ย ย ย ย ย ย const monthKey = `${currentYear}-${currentMonth}`;

ย ย ย ย ย ย if (transactions[monthKey]) {

ย ย ย ย ย ย ย ย transactions[monthKey] = transactions[monthKey].filter(t => t.id !== id);

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย // Salvar automaticamente apรณs remoรงรฃo

ย ย ย ย ย ย ย ย showNotification('๐๏ธ Transaรงรฃo removida', 'info');

ย ย ย ย ย ย ย ย await saveToCloud();

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย updateDisplay();

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Mudar mรชs

ย ย ย ย function changeMonth(direction) {

ย ย ย ย ย ย currentMonth += direction;

ย ย ย ย ย ยย

ย ย ย ย ย ย if (currentMonth > 11) {

ย ย ย ย ย ย ย ย currentMonth = 0;

ย ย ย ย ย ย ย ย currentYear++;

ย ย ย ย ย ย } else if (currentMonth < 0) {

ย ย ย ย ย ย ย ย currentMonth = 11;

ย ย ย ย ย ย ย ย currentYear--;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย updateDisplay();

ย ย ย ย }



ย ย ย ย // Atualizar todo o display

ย ย ย ย function updateDisplay() {

ย ย ย ย ย ย updateMonthDisplay();

ย ย ย ย ย ย updateBalanceDisplay();

ย ย ย ย ย ย updateTransactionsList();

ย ย ย ย }



ย ย ย ย // Atualizar display do mรชs

ย ย ย ย function updateMonthDisplay() {

ย ย ย ย ย ย const monthElement = document.getElementById('currentMonth');

ย ย ย ย ย ย monthElement.textContent = `${monthNames[currentMonth]} ${currentYear}`;

ย ย ย ย ย ยย

ย ย ย ย ย ย const balance = calculateBalance();

ย ย ย ย ย ยย

ย ย ย ย ย ย monthElement.className = 'current-month ';

ย ย ย ย ย ย if (balance > 0) {

ย ย ย ย ย ย ย ย monthElement.className += 'surplus';

ย ย ย ย ย ย } else if (balance < 0) {

ย ย ย ย ย ย ย ย monthElement.className += 'deficit';

ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย monthElement.className += 'neutral';

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Calcular saldo do mรชs atual

ย ย ย ย function calculateBalance() {

ย ย ย ย ย ย const monthKey = `${currentYear}-${currentMonth}`;

ย ย ย ย ย ย const monthTransactions = transactions[monthKey] || [];

ย ย ย ย ย ยย

ย ย ย ย ย ย let income = 0;

ย ย ย ย ย ย let expense = 0;

ย ย ย ย ย ยย

ย ย ย ย ย ย monthTransactions.forEach(transaction => {

ย ย ย ย ย ย ย ย if (transaction.type === 'income') {

ย ย ย ย ย ย ย ย ย ย income += transaction.amount;

ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย expense += transaction.amount;

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย });

ย ย ย ย ย ยย

ย ย ย ย ย ย return income - expense;

ย ย ย ย }



ย ย ย ย // Atualizar display do saldo

ย ย ย ย function updateBalanceDisplay() {

ย ย ย ย ย ย const balance = calculateBalance();

ย ย ย ย ย ย const balanceElement = document.getElementById('balanceDisplay');

ย ย ย ย ย ย const totalIncomeElement = document.getElementById('totalIncome');

ย ย ย ย ย ย const totalExpenseElement = document.getElementById('totalExpense');

ย ย ย ย ย ย const monthlyIncomeElement = document.getElementById('monthlyIncome');

ย ย ย ย ย ย const monthlyExpenseElement = document.getElementById('monthlyExpense');

ย ย ย ย ย ยย

ย ย ย ย ย ย const monthKey = `${currentYear}-${currentMonth}`;

ย ย ย ย ย ย const monthTransactions = transactions[monthKey] || [];

ย ย ย ย ย ยย

ย ย ย ย ย ย let income = 0;

ย ย ย ย ย ย let expense = 0;

ย ย ย ย ย ยย

ย ย ย ย ย ย monthTransactions.forEach(transaction => {

ย ย ย ย ย ย ย ย if (transaction.type === 'income') {

ย ย ย ย ย ย ย ย ย ย income += transaction.amount;

ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย expense += transaction.amount;

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย });



ย ย ย ย ย ย balanceElement.textContent = `Saldo: ${formatCurrency(balance)}`;

ย ย ย ย ย ย totalIncomeElement.textContent = formatCurrency(income);

ย ย ย ย ย ย totalExpenseElement.textContent = formatCurrency(expense);

ย ย ย ย ย ย monthlyIncomeElement.textContent = formatCurrency(income);

ย ย ย ย ย ย monthlyExpenseElement.textContent = formatCurrency(expense);

ย ย ย ย ย ยย

ย ย ย ย ย ย balanceElement.className = 'balance-display ';

ย ย ย ย ย ย if (balance > 0) {

ย ย ย ย ย ย ย ย balanceElement.className += 'positive';

ย ย ย ย ย ย } else if (balance < 0) {

ย ย ย ย ย ย ย ย balanceElement.className += 'negative';

ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย balanceElement.className += 'zero';

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Atualizar lista de transaรงรตes

ย ย ย ย function updateTransactionsList() {

ย ย ย ย ย ย const monthKey = `${currentYear}-${currentMonth}`;

ย ย ย ย ย ย const monthTransactions = transactions[monthKey] || [];

ย ย ย ย ย ย const listElement = document.getElementById('transactionsList');

ย ย ย ย ย ยย

ย ย ย ย ย ย console.log(`Atualizando lista para ${monthNames[currentMonth]} ${currentYear}`);

ย ย ย ย ย ย console.log('Transaรงรตes encontradas:', monthTransactions.length);

ย ย ย ย ย ยย

ย ย ย ย ย ย if (monthTransactions.length === 0) {

ย ย ย ย ย ย ย ย listElement.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Nenhuma transaรงรฃo registrada este mรชs.</p>';

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย // Ordenar por data (mais recente primeiro)

ย ย ย ย ย ย const sortedTransactions = [...monthTransactions].sort((a, b) => b.id - a.id);

ย ย ย ย ย ยย

ย ย ย ย ย ย listElement.innerHTML = sortedTransactions.map(transaction => `

ย ย ย ย ย ย ย ย <div class="transaction-item ${transaction.type}">

ย ย ย ย ย ย ย ย ย ย <div class="transaction-header">

ย ย ย ย ย ย ย ย ย ย ย ย <span class="transaction-name">${transaction.name}</span>

ย ย ย ย ย ย ย ย ย ย ย ย <span class="transaction-amount ${transaction.type === 'income' ? 'positive' : 'negative'}">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ${transaction.type === 'income' ? '+' : '-'} ${formatCurrency(transaction.amount)}

ย ย ย ย ย ย ย ย ย ย ย ย </span>

ย ย ย ย ย ย ย ย ย ย ย ย <button class="delete-btn" onclick="removeTransaction(${transaction.id})" title="Excluir transaรงรฃo">๐๏ธ</button>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ${transaction.description ? `<div class="transaction-description">${transaction.description}</div>` : ''}

ย ย ย ย ย ย ย ย ย ย <div class="transaction-date">๐ ${transaction.date}</div>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย `).join('');

ย ย ย ย ย ยย

ย ย ย ย ย ย console.log('Lista atualizada com', sortedTransactions.length, 'transaรงรตes');

ย ย ย ย }



ย ย ย ย // Formatar moeda brasileira

ย ย ย ย function formatCurrency(amount) {

ย ย ย ย ย ย return new Intl.NumberFormat('pt-BR', {

ย ย ย ย ย ย ย ย style: 'currency',

ย ย ย ย ย ย ย ย currency: 'BRL'

ย ย ย ย ย ย }).format(amount);

ย ย ย ย }



ย ย ย ย // Inicializar quando a pรกgina carregar

ย ย ย ย document.addEventListener('DOMContentLoaded', init);

ย ย </script>

</body>

</html>